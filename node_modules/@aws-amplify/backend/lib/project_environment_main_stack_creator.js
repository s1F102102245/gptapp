import { AmplifyStack } from './engine/amplify_stack.js';
import { BackendIdentifierConversions } from '@aws-amplify/platform-core';
/**
 * Creates stacks that are tied to a given project environment via an SSM parameter
 */
export class ProjectEnvironmentMainStackCreator {
    scope;
    backendId;
    mainStack = undefined;
    /**
     * Initialize with a project environment
     */
    constructor(scope, backendId) {
        this.scope = scope;
        this.backendId = backendId;
    }
    /**
     * Get a stack for this environment in the provided CDK scope
     */
    getOrCreateMainStack = () => {
        if (this.mainStack === undefined) {
            this.mainStack = new AmplifyStack(this.scope, BackendIdentifierConversions.toStackName(this.backendId));
        }
        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
        return this.mainStack;
    };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJvamVjdF9lbnZpcm9ubWVudF9tYWluX3N0YWNrX2NyZWF0b3IuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvcHJvamVjdF9lbnZpcm9ubWVudF9tYWluX3N0YWNrX2NyZWF0b3IudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBR0EsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLDJCQUEyQixDQUFDO0FBQ3pELE9BQU8sRUFBRSw0QkFBNEIsRUFBRSxNQUFNLDRCQUE0QixDQUFDO0FBRTFFOztHQUVHO0FBQ0gsTUFBTSxPQUFPLGtDQUFrQztJQU0xQjtJQUNBO0lBTlgsU0FBUyxHQUFzQixTQUFTLENBQUM7SUFDakQ7O09BRUc7SUFDSCxZQUNtQixLQUFnQixFQUNoQixTQUE0QjtRQUQ1QixVQUFLLEdBQUwsS0FBSyxDQUFXO1FBQ2hCLGNBQVMsR0FBVCxTQUFTLENBQW1CO0lBQzVDLENBQUM7SUFFSjs7T0FFRztJQUNILG9CQUFvQixHQUFHLEdBQVUsRUFBRTtRQUNqQyxJQUFJLElBQUksQ0FBQyxTQUFTLEtBQUssU0FBUyxFQUFFO1lBQ2hDLElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxZQUFZLENBQy9CLElBQUksQ0FBQyxLQUFLLEVBQ1YsNEJBQTRCLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FDekQsQ0FBQztTQUNIO1FBQ0Qsb0VBQW9FO1FBQ3BFLE9BQU8sSUFBSSxDQUFDLFNBQVUsQ0FBQztJQUN6QixDQUFDLENBQUM7Q0FDSCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJhY2tlbmRJZGVudGlmaWVyLCBNYWluU3RhY2tDcmVhdG9yIH0gZnJvbSAnQGF3cy1hbXBsaWZ5L3BsdWdpbi10eXBlcyc7XG5pbXBvcnQgeyBDb25zdHJ1Y3QgfSBmcm9tICdjb25zdHJ1Y3RzJztcbmltcG9ydCB7IFN0YWNrIH0gZnJvbSAnYXdzLWNkay1saWInO1xuaW1wb3J0IHsgQW1wbGlmeVN0YWNrIH0gZnJvbSAnLi9lbmdpbmUvYW1wbGlmeV9zdGFjay5qcyc7XG5pbXBvcnQgeyBCYWNrZW5kSWRlbnRpZmllckNvbnZlcnNpb25zIH0gZnJvbSAnQGF3cy1hbXBsaWZ5L3BsYXRmb3JtLWNvcmUnO1xuXG4vKipcbiAqIENyZWF0ZXMgc3RhY2tzIHRoYXQgYXJlIHRpZWQgdG8gYSBnaXZlbiBwcm9qZWN0IGVudmlyb25tZW50IHZpYSBhbiBTU00gcGFyYW1ldGVyXG4gKi9cbmV4cG9ydCBjbGFzcyBQcm9qZWN0RW52aXJvbm1lbnRNYWluU3RhY2tDcmVhdG9yIGltcGxlbWVudHMgTWFpblN0YWNrQ3JlYXRvciB7XG4gIHByaXZhdGUgbWFpblN0YWNrOiBTdGFjayB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcbiAgLyoqXG4gICAqIEluaXRpYWxpemUgd2l0aCBhIHByb2plY3QgZW52aXJvbm1lbnRcbiAgICovXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgcmVhZG9ubHkgc2NvcGU6IENvbnN0cnVjdCxcbiAgICBwcml2YXRlIHJlYWRvbmx5IGJhY2tlbmRJZDogQmFja2VuZElkZW50aWZpZXJcbiAgKSB7fVxuXG4gIC8qKlxuICAgKiBHZXQgYSBzdGFjayBmb3IgdGhpcyBlbnZpcm9ubWVudCBpbiB0aGUgcHJvdmlkZWQgQ0RLIHNjb3BlXG4gICAqL1xuICBnZXRPckNyZWF0ZU1haW5TdGFjayA9ICgpOiBTdGFjayA9PiB7XG4gICAgaWYgKHRoaXMubWFpblN0YWNrID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMubWFpblN0YWNrID0gbmV3IEFtcGxpZnlTdGFjayhcbiAgICAgICAgdGhpcy5zY29wZSxcbiAgICAgICAgQmFja2VuZElkZW50aWZpZXJDb252ZXJzaW9ucy50b1N0YWNrTmFtZSh0aGlzLmJhY2tlbmRJZClcbiAgICAgICk7XG4gICAgfVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbm9uLW51bGwtYXNzZXJ0aW9uXG4gICAgcmV0dXJuIHRoaXMubWFpblN0YWNrITtcbiAgfTtcbn1cbiJdfQ==
import _fsp from 'fs/promises';
import { ClientConfigFormat, } from '../client-config-types/client_config.js';
/**
 * A class that persists client config to disk.
 */
export class ClientConfigWriter {
    pathResolver;
    formatter;
    fsp;
    /**
     * Creates client config writer
     */
    constructor(pathResolver, formatter, fsp = _fsp) {
        this.pathResolver = pathResolver;
        this.formatter = formatter;
        this.fsp = fsp;
    }
    /**
     * Persists provided client config as json file to target path.
     */
    writeClientConfig = async (clientConfig, outDir, format = ClientConfigFormat.JSON) => {
        const targetPath = await this.pathResolver(outDir, format);
        const fileContent = this.formatter.format(clientConfig, format);
        await this.fsp.writeFile(targetPath, fileContent);
    };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2xpZW50X2NvbmZpZ193cml0ZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvY2xpZW50LWNvbmZpZy13cml0ZXIvY2xpZW50X2NvbmZpZ193cml0ZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxJQUFJLE1BQU0sYUFBYSxDQUFDO0FBQy9CLE9BQU8sRUFFTCxrQkFBa0IsR0FDbkIsTUFBTSx5Q0FBeUMsQ0FBQztBQVFqRDs7R0FFRztBQUNILE1BQU0sT0FBTyxrQkFBa0I7SUFLVjtJQUNBO0lBQ0E7SUFObkI7O09BRUc7SUFDSCxZQUNtQixZQUFzQyxFQUN0QyxTQUFnQyxFQUNoQyxNQUFNLElBQUk7UUFGVixpQkFBWSxHQUFaLFlBQVksQ0FBMEI7UUFDdEMsY0FBUyxHQUFULFNBQVMsQ0FBdUI7UUFDaEMsUUFBRyxHQUFILEdBQUcsQ0FBTztJQUMxQixDQUFDO0lBQ0o7O09BRUc7SUFDSCxpQkFBaUIsR0FBRyxLQUFLLEVBQ3ZCLFlBQTBCLEVBQzFCLE1BQWUsRUFDZixTQUE2QixrQkFBa0IsQ0FBQyxJQUFJLEVBQ3JDLEVBQUU7UUFDakIsTUFBTSxVQUFVLEdBQUcsTUFBTSxJQUFJLENBQUMsWUFBWSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsQ0FBQztRQUMzRCxNQUFNLFdBQVcsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxZQUFZLEVBQUUsTUFBTSxDQUFDLENBQUM7UUFDaEUsTUFBTSxJQUFJLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxVQUFVLEVBQUUsV0FBVyxDQUFDLENBQUM7SUFDcEQsQ0FBQyxDQUFDO0NBQ0giLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgX2ZzcCBmcm9tICdmcy9wcm9taXNlcyc7XG5pbXBvcnQge1xuICBDbGllbnRDb25maWcsXG4gIENsaWVudENvbmZpZ0Zvcm1hdCxcbn0gZnJvbSAnLi4vY2xpZW50LWNvbmZpZy10eXBlcy9jbGllbnRfY29uZmlnLmpzJztcbmltcG9ydCB7IENsaWVudENvbmZpZ0Zvcm1hdHRlciB9IGZyb20gJy4vY2xpZW50X2NvbmZpZ19mb3JtYXR0ZXIuanMnO1xuXG5leHBvcnQgdHlwZSBDbGllbnRDb25maWdQYXRoUmVzb2x2ZXIgPSAoXG4gIG91dERpcj86IHN0cmluZyxcbiAgZm9ybWF0PzogQ2xpZW50Q29uZmlnRm9ybWF0XG4pID0+IFByb21pc2U8c3RyaW5nPjtcblxuLyoqXG4gKiBBIGNsYXNzIHRoYXQgcGVyc2lzdHMgY2xpZW50IGNvbmZpZyB0byBkaXNrLlxuICovXG5leHBvcnQgY2xhc3MgQ2xpZW50Q29uZmlnV3JpdGVyIHtcbiAgLyoqXG4gICAqIENyZWF0ZXMgY2xpZW50IGNvbmZpZyB3cml0ZXJcbiAgICovXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgcmVhZG9ubHkgcGF0aFJlc29sdmVyOiBDbGllbnRDb25maWdQYXRoUmVzb2x2ZXIsXG4gICAgcHJpdmF0ZSByZWFkb25seSBmb3JtYXR0ZXI6IENsaWVudENvbmZpZ0Zvcm1hdHRlcixcbiAgICBwcml2YXRlIHJlYWRvbmx5IGZzcCA9IF9mc3BcbiAgKSB7fVxuICAvKipcbiAgICogUGVyc2lzdHMgcHJvdmlkZWQgY2xpZW50IGNvbmZpZyBhcyBqc29uIGZpbGUgdG8gdGFyZ2V0IHBhdGguXG4gICAqL1xuICB3cml0ZUNsaWVudENvbmZpZyA9IGFzeW5jIChcbiAgICBjbGllbnRDb25maWc6IENsaWVudENvbmZpZyxcbiAgICBvdXREaXI/OiBzdHJpbmcsXG4gICAgZm9ybWF0OiBDbGllbnRDb25maWdGb3JtYXQgPSBDbGllbnRDb25maWdGb3JtYXQuSlNPTlxuICApOiBQcm9taXNlPHZvaWQ+ID0+IHtcbiAgICBjb25zdCB0YXJnZXRQYXRoID0gYXdhaXQgdGhpcy5wYXRoUmVzb2x2ZXIob3V0RGlyLCBmb3JtYXQpO1xuICAgIGNvbnN0IGZpbGVDb250ZW50ID0gdGhpcy5mb3JtYXR0ZXIuZm9ybWF0KGNsaWVudENvbmZpZywgZm9ybWF0KTtcbiAgICBhd2FpdCB0aGlzLmZzcC53cml0ZUZpbGUodGFyZ2V0UGF0aCwgZmlsZUNvbnRlbnQpO1xuICB9O1xufVxuIl19
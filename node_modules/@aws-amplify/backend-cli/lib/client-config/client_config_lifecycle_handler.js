import { getClientConfigPath, } from '@aws-amplify/client-config';
import fsp from 'fs/promises';
/**
 * Life cycle handler for client config files written to file system
 */
export class ClientConfigLifecycleHandler {
    clientConfigGeneratorAdapter;
    outDir;
    format;
    /**
     * Instantiate a new life cycle handler which proxy requests to ClientConfigGeneratorAdapter
     */
    constructor(clientConfigGeneratorAdapter, outDir, format) {
        this.clientConfigGeneratorAdapter = clientConfigGeneratorAdapter;
        this.outDir = outDir;
        this.format = format;
    }
    generateClientConfigFile = async (backendIdentifier) => {
        await this.clientConfigGeneratorAdapter.generateClientConfigToFile(backendIdentifier, this.outDir, this.format);
    };
    deleteClientConfigFile = async () => {
        const path = await getClientConfigPath(this.outDir, this.format);
        await fsp.rm(path);
    };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2xpZW50X2NvbmZpZ19saWZlY3ljbGVfaGFuZGxlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9jbGllbnQtY29uZmlnL2NsaWVudF9jb25maWdfbGlmZWN5Y2xlX2hhbmRsZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUVMLG1CQUFtQixHQUNwQixNQUFNLDRCQUE0QixDQUFDO0FBR3BDLE9BQU8sR0FBRyxNQUFNLGFBQWEsQ0FBQztBQUU5Qjs7R0FFRztBQUNILE1BQU0sT0FBTyw0QkFBNEI7SUFLN0I7SUFDUztJQUNBO0lBTm5COztPQUVHO0lBQ0gsWUFDVSw0QkFBMEQsRUFDakQsTUFBZSxFQUNmLE1BQTJCO1FBRnBDLGlDQUE0QixHQUE1Qiw0QkFBNEIsQ0FBOEI7UUFDakQsV0FBTSxHQUFOLE1BQU0sQ0FBUztRQUNmLFdBQU0sR0FBTixNQUFNLENBQXFCO0lBQzNDLENBQUM7SUFFSix3QkFBd0IsR0FBRyxLQUFLLEVBQzlCLGlCQUE0QyxFQUM1QyxFQUFFO1FBQ0YsTUFBTSxJQUFJLENBQUMsNEJBQTRCLENBQUMsMEJBQTBCLENBQ2hFLGlCQUFpQixFQUNqQixJQUFJLENBQUMsTUFBTSxFQUNYLElBQUksQ0FBQyxNQUFNLENBQ1osQ0FBQztJQUNKLENBQUMsQ0FBQztJQUVGLHNCQUFzQixHQUFHLEtBQUssSUFBSSxFQUFFO1FBQ2xDLE1BQU0sSUFBSSxHQUFHLE1BQU0sbUJBQW1CLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDakUsTUFBTSxHQUFHLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ3JCLENBQUMsQ0FBQztDQUNIIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgQ2xpZW50Q29uZmlnRm9ybWF0LFxuICBnZXRDbGllbnRDb25maWdQYXRoLFxufSBmcm9tICdAYXdzLWFtcGxpZnkvY2xpZW50LWNvbmZpZyc7XG5pbXBvcnQgeyBDbGllbnRDb25maWdHZW5lcmF0b3JBZGFwdGVyIH0gZnJvbSAnLi9jbGllbnRfY29uZmlnX2dlbmVyYXRvcl9hZGFwdGVyLmpzJztcbmltcG9ydCB7IERlcGxveWVkQmFja2VuZElkZW50aWZpZXIgfSBmcm9tICdAYXdzLWFtcGxpZnkvZGVwbG95ZWQtYmFja2VuZC1jbGllbnQnO1xuaW1wb3J0IGZzcCBmcm9tICdmcy9wcm9taXNlcyc7XG5cbi8qKlxuICogTGlmZSBjeWNsZSBoYW5kbGVyIGZvciBjbGllbnQgY29uZmlnIGZpbGVzIHdyaXR0ZW4gdG8gZmlsZSBzeXN0ZW1cbiAqL1xuZXhwb3J0IGNsYXNzIENsaWVudENvbmZpZ0xpZmVjeWNsZUhhbmRsZXIge1xuICAvKipcbiAgICogSW5zdGFudGlhdGUgYSBuZXcgbGlmZSBjeWNsZSBoYW5kbGVyIHdoaWNoIHByb3h5IHJlcXVlc3RzIHRvIENsaWVudENvbmZpZ0dlbmVyYXRvckFkYXB0ZXJcbiAgICovXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgY2xpZW50Q29uZmlnR2VuZXJhdG9yQWRhcHRlcjogQ2xpZW50Q29uZmlnR2VuZXJhdG9yQWRhcHRlcixcbiAgICBwcml2YXRlIHJlYWRvbmx5IG91dERpcj86IHN0cmluZyxcbiAgICBwcml2YXRlIHJlYWRvbmx5IGZvcm1hdD86IENsaWVudENvbmZpZ0Zvcm1hdFxuICApIHt9XG5cbiAgZ2VuZXJhdGVDbGllbnRDb25maWdGaWxlID0gYXN5bmMgKFxuICAgIGJhY2tlbmRJZGVudGlmaWVyOiBEZXBsb3llZEJhY2tlbmRJZGVudGlmaWVyXG4gICkgPT4ge1xuICAgIGF3YWl0IHRoaXMuY2xpZW50Q29uZmlnR2VuZXJhdG9yQWRhcHRlci5nZW5lcmF0ZUNsaWVudENvbmZpZ1RvRmlsZShcbiAgICAgIGJhY2tlbmRJZGVudGlmaWVyLFxuICAgICAgdGhpcy5vdXREaXIsXG4gICAgICB0aGlzLmZvcm1hdFxuICAgICk7XG4gIH07XG5cbiAgZGVsZXRlQ2xpZW50Q29uZmlnRmlsZSA9IGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBwYXRoID0gYXdhaXQgZ2V0Q2xpZW50Q29uZmlnUGF0aCh0aGlzLm91dERpciwgdGhpcy5mb3JtYXQpO1xuICAgIGF3YWl0IGZzcC5ybShwYXRoKTtcbiAgfTtcbn1cbiJdfQ==
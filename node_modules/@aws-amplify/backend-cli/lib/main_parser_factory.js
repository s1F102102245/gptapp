import { fileURLToPath } from 'url';
import yargs from 'yargs';
import { PackageJsonReader } from '@aws-amplify/platform-core';
import { createGenerateCommand } from './commands/generate/generate_command_factory.js';
import { createSandboxCommand } from './commands/sandbox/sandbox_command_factory.js';
import { createPipelineDeployCommand } from './commands/pipeline-deploy/pipeline_deploy_command_factory.js';
import { createConfigureCommand } from './commands/configure/configure_command_factory.js';
/**
 * Creates main parser.
 */
export const createMainParser = () => {
    const packageJson = new PackageJsonReader().read(fileURLToPath(new URL('../package.json', import.meta.url)));
    return yargs()
        .version(packageJson.version ?? '')
        .command(createGenerateCommand())
        .command(createSandboxCommand())
        .command(createPipelineDeployCommand())
        .command(createConfigureCommand())
        .help()
        .demandCommand()
        .strictCommands()
        .recommendCommands();
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbl9wYXJzZXJfZmFjdG9yeS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uL3NyYy9tYWluX3BhcnNlcl9mYWN0b3J5LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSxLQUFLLENBQUM7QUFDcEMsT0FBTyxLQUFlLE1BQU0sT0FBTyxDQUFDO0FBQ3BDLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLDRCQUE0QixDQUFDO0FBQy9ELE9BQU8sRUFBRSxxQkFBcUIsRUFBRSxNQUFNLGlEQUFpRCxDQUFDO0FBQ3hGLE9BQU8sRUFBRSxvQkFBb0IsRUFBRSxNQUFNLCtDQUErQyxDQUFDO0FBQ3JGLE9BQU8sRUFBRSwyQkFBMkIsRUFBRSxNQUFNLCtEQUErRCxDQUFDO0FBQzVHLE9BQU8sRUFBRSxzQkFBc0IsRUFBRSxNQUFNLG1EQUFtRCxDQUFDO0FBRTNGOztHQUVHO0FBQ0gsTUFBTSxDQUFDLE1BQU0sZ0JBQWdCLEdBQUcsR0FBUyxFQUFFO0lBQ3pDLE1BQU0sV0FBVyxHQUFHLElBQUksaUJBQWlCLEVBQUUsQ0FBQyxJQUFJLENBQzlDLGFBQWEsQ0FBQyxJQUFJLEdBQUcsQ0FBQyxpQkFBaUIsRUFBRSxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQzNELENBQUM7SUFDRixPQUFPLEtBQUssRUFBRTtTQUNYLE9BQU8sQ0FBQyxXQUFXLENBQUMsT0FBTyxJQUFJLEVBQUUsQ0FBQztTQUNsQyxPQUFPLENBQUMscUJBQXFCLEVBQUUsQ0FBQztTQUNoQyxPQUFPLENBQUMsb0JBQW9CLEVBQUUsQ0FBQztTQUMvQixPQUFPLENBQUMsMkJBQTJCLEVBQUUsQ0FBQztTQUN0QyxPQUFPLENBQUMsc0JBQXNCLEVBQUUsQ0FBQztTQUNqQyxJQUFJLEVBQUU7U0FDTixhQUFhLEVBQUU7U0FDZixjQUFjLEVBQUU7U0FDaEIsaUJBQWlCLEVBQUUsQ0FBQztBQUN6QixDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBmaWxlVVJMVG9QYXRoIH0gZnJvbSAndXJsJztcbmltcG9ydCB5YXJncywgeyBBcmd2IH0gZnJvbSAneWFyZ3MnO1xuaW1wb3J0IHsgUGFja2FnZUpzb25SZWFkZXIgfSBmcm9tICdAYXdzLWFtcGxpZnkvcGxhdGZvcm0tY29yZSc7XG5pbXBvcnQgeyBjcmVhdGVHZW5lcmF0ZUNvbW1hbmQgfSBmcm9tICcuL2NvbW1hbmRzL2dlbmVyYXRlL2dlbmVyYXRlX2NvbW1hbmRfZmFjdG9yeS5qcyc7XG5pbXBvcnQgeyBjcmVhdGVTYW5kYm94Q29tbWFuZCB9IGZyb20gJy4vY29tbWFuZHMvc2FuZGJveC9zYW5kYm94X2NvbW1hbmRfZmFjdG9yeS5qcyc7XG5pbXBvcnQgeyBjcmVhdGVQaXBlbGluZURlcGxveUNvbW1hbmQgfSBmcm9tICcuL2NvbW1hbmRzL3BpcGVsaW5lLWRlcGxveS9waXBlbGluZV9kZXBsb3lfY29tbWFuZF9mYWN0b3J5LmpzJztcbmltcG9ydCB7IGNyZWF0ZUNvbmZpZ3VyZUNvbW1hbmQgfSBmcm9tICcuL2NvbW1hbmRzL2NvbmZpZ3VyZS9jb25maWd1cmVfY29tbWFuZF9mYWN0b3J5LmpzJztcblxuLyoqXG4gKiBDcmVhdGVzIG1haW4gcGFyc2VyLlxuICovXG5leHBvcnQgY29uc3QgY3JlYXRlTWFpblBhcnNlciA9ICgpOiBBcmd2ID0+IHtcbiAgY29uc3QgcGFja2FnZUpzb24gPSBuZXcgUGFja2FnZUpzb25SZWFkZXIoKS5yZWFkKFxuICAgIGZpbGVVUkxUb1BhdGgobmV3IFVSTCgnLi4vcGFja2FnZS5qc29uJywgaW1wb3J0Lm1ldGEudXJsKSlcbiAgKTtcbiAgcmV0dXJuIHlhcmdzKClcbiAgICAudmVyc2lvbihwYWNrYWdlSnNvbi52ZXJzaW9uID8/ICcnKVxuICAgIC5jb21tYW5kKGNyZWF0ZUdlbmVyYXRlQ29tbWFuZCgpKVxuICAgIC5jb21tYW5kKGNyZWF0ZVNhbmRib3hDb21tYW5kKCkpXG4gICAgLmNvbW1hbmQoY3JlYXRlUGlwZWxpbmVEZXBsb3lDb21tYW5kKCkpXG4gICAgLmNvbW1hbmQoY3JlYXRlQ29uZmlndXJlQ29tbWFuZCgpKVxuICAgIC5oZWxwKClcbiAgICAuZGVtYW5kQ29tbWFuZCgpXG4gICAgLnN0cmljdENvbW1hbmRzKClcbiAgICAucmVjb21tZW5kQ29tbWFuZHMoKTtcbn07XG4iXX0=
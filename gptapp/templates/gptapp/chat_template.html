{% load static %}

<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE-edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HACHI</title>
    <link rel="stylesheet" href="{% static 'gptapp/sample1.css' %}" media="screen and (min-width: 1200px)">
    <!--<link rel="stylesheet" href="{% static 'gptapp/sample2.css' %}" media="screen and (min-width: 992px)">
    <link rel="stylesheet" href="{% static 'gptapp/sample3.css' %}" media="screen and (min-width: 768px)">
    <link rel="stylesheet" href="{% static 'gptapp/sample4.css' %}" media="screen and (max-width: 767px)"> 
    -->
    <script src="{% static 'gptapp/sample.js' %}"></script>
    <!-- <script src="{% static 'gptapp/chat_script.js' %}"></script>  -->
    <link rel = "icon" href  ="{% static 'gptapp/favicon.ico' %}">
</head>
    


<body>
    <main>
        
        <!-- 背景画像 -->
        <img src="{% static 'gptapp/grid.png' %}" class="grid">
        <img src="{% static 'gptapp/map.png' %}" class="map"> 
        
        
        <!-- 左上の画像 -->
        <img src="{% static 'gptapp/rogo_circle.png' %}" class="rogo_circle" style="width:250px; height: 250px;">
        <img src="{% static 'gptapp/HACHI.png' %}" class="hachi" style="width:100px; height:100px; margin-left: 25px;"> 
        
        <!-- フレーム -->
        <img src="{% static 'gptapp/frame.png' %}" class="frame"> 
        
        <!-- フォーム背景 -->
        <img src="{% static 'gptapp/form_part.png' %}" class="form_part"> 
        
        <!-- 入力フォーム背景 -->
        <img src="{% static 'gptapp/form.png' %}" class="form"> 
        
        
        <!-- 出力画像 -->
        <img src="{% static 'gptapp/hukidashi.png' %}" class="hukidashi">  

        <div class="CCC">
        
        {% if chat_response %}
        <section class="chat-response">
        <p>{{ chat_response }}</p>
        </section>
        {% endif %}
        
        <!--
        <p>もちろんです、ここでいくつかの表現をご紹介します。 1. "一石二鳥を狙う" - 一つの行動で二つ以上の結果を得ること。 2. "犬も歩けば棒に当たる" - 予想外のトラブルに出くわすこともあるという警告。 3. "暴風雨の後の青空" - トラブルの後には必ず良いことがあるという希望。 4. "一切れのパンでも二度美味しい" - 質素なものでも、それを二度楽しむことができる。 5. "雨後の筍のように" - ある事象が頻繁に発生する様子。 6. "七転び八起き" - 失敗しても何度でも立ち上がることの大切さ。 7. "百聞は一見に如かず" - 自分の目で見る価値が非常に大きいことを表しています。 8. "三日坊主" - 続かない人のこと、あるいはその行動。 9. "二兎を追う者は一兎をも得ず" - 一度に多くのことをしようとした結果、何も手に入らないという警告。 10. "猫に小判" - 価値のわからない人には価値のあるものを与えても無駄であるという意味。 11. "月とすっぽん" - 二つのものの差が非常に大きいこと。 12. "後悔先に立たず" - 行動を起こす前に考えることの重要性。 13. "時は金なり" - 時間は非常に貴重であるという考え。 14. "出る杭は打たれる" - 周りと異なる行動をとると、批判される可能性があるという警告。 15. "目からウロコが落ちる" - 新たな知識を得て驚くこと。 16. "備えあれば憂いなし" - 事前の準備が心配事を減らすという考え。 17. "火のない所に煙は立たず" - 噂や疑いがある場所には何らかの事実があるという考え。 </p>
        -->
        </div>

        <div class="OOO">
            <h3 class="ocrmozi">画像からテキストを抽出(ocr)</h3>
            <form action="" method="post" class="ocr-form" enctype="multipart/form-data">
                {% csrf_token %}
                {{ ocr_form.as_p }}
                <br>
                <div class="button-container">
                    <input type="submit" name="upload_button" value="OCRを実行" class="ocr-button" style="margin: 0 auto; display: block;" onclick="showPopup()"> 
                </div>
            </form>
        </div>
        <br>
        


        <form action="" method="post" class="chat-form">
            {% csrf_token %}
            {{ chat_form.as_p }}
            <button type="submit" name="chat_button" class="chatbutton" style="margin: 0 auto; display: block;">
                <img src="{% static 'gptapp/button.png' %}" alt="Image" style="width: 90px; height: 85px;">
            </button>
        </form>
        
        <div id="ocrText" style="display: none;">
            {% if ocr_text %}
                <p>{{ ocr_text }}</p>
            {% endif %}
        </div>



        
        
        
        
        
        

    <!-- 待機画面の動作 
    <script>
        document.querySelector('.chat-form').addEventListener('submit', function() {
            document.getElementById('loading-indicator').style.display = 'block';
        });
    </script>
    <script>
        document.querySelector('.ocr-form').addEventListener('submit', function() {
            document.getElementById('loading-indicator').style.display = 'block';
        });
    </script>
    <div id="loading-indicator" style="text-align: center;">
        <img src="{% static 'gptapp/loading-2.gif' %}" style="width: 300px; height: 200px;"alt="ロード中">
        <p>ロード中...</p>
    </div>

    <script>
        function hideLoadingIndicator() {
            document.getElementById('loading-indicator').style.display = 'none';
        }
        hideLoadingIndicator();
    </script>
    以上。 -->
    </main>
    <script>
        function showPopup() {
            // テキストエリアからテキストを取得
            var ocrText = document.getElementById("ocrText").innerText;
    
            // ポップアップウィンドウを作成
            var popupWindow = window.open('', 'popup', 'width=400,height=300');
    
            // ポップアップウィンドウにテキストを表示
            popupWindow.document.write('<h2>抽出したテキスト:</h2>');
            popupWindow.document.write('<p>' + ocrText + '</p>');
        }
    </script>

</body>
</html>

